{% extends 'dashboard/base_template.html' %}
    {% block custom_css %}
        {% block page_title %}
        {% endblock page_title %}
        <style>
            .custom-error {
                max-width: 300px;
                /* Adjust the width to your desired value */
                margin: 0 auto;
                /* Add this line to center the element */
                text-align: center;
                /* Add this line to center the text inside the element */
              }
              .input-group-text {
                cursor: pointer;
              }
              .grey-card {
                background-color:LightGray;
            }
           
                 .dataTables_filter{
            margin-bottom: 16px !important;
        }
        .dataTables_length{
            margin-top: 8px !important;
        }
    
       
          

        </style>
    {% endblock custom_css %}
{% block main_content %}

<div class="page-wrapper negative-padding">
    <div class="content container-fluid">
        <div class="page-header">
            <div class="row align-items-center">
                <div class="col">
                    <h3 class="page-title">Expense</h3>
                </div>
                <div class="col-auto">
                    <a href="{% url 'add_accexpense' %}" class="btn btn-primary btn-rounded"> <i class="fas fa-plus"></i>Add Expense</a>
                </div>
            </div>
        </div>
        {% comment %} <div id="message-container" class="alert alert-success" style="display:none;">
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
                    {% endfor %}
            </ul>
            {% endif %}
        </div> {% endcomment %}


        <div class="row">
            <div class="col-sm-12">
                <div class="card card-table">
                    <div class="card-body">
                        <div class="table-responsive">
                        <!-- <input type="date" id="startDate" class="remember">
                        <input type="date" id="endDate" class="remember">
                        <button onclick="filterTable()"class="btn btn-secondary"><i class="fa fa-filter" aria-hidden="true"style="padding-right:2px;"></i>Filter</button>
                        <button type="reset"class="btn btn-success reset" ><i class="fa fa-undo" aria-hidden="true" style="padding-right: 3px;"></i>Reset</button>     -->
                        <table id="challanTable" class="table table-center table-hover datatable">
                                <thead class="thead-light">
                                    <tr>
                                    <tr>
                                        <th>SR.NO</th>
                                        <th>DATE</th>
                                        <th>INVOICE NUMBER</th>
                                        <th>VENDOR NAME</th>
                                        <th>AMOUNT</th>
                                        <th>DUE AMOUNT</th>
                                        <th>ACTION</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% if accexp_list %}
                                    {% for t in accexp_list %}
                                    <tr>
                                        <td>
                                            {{t.serial_no}}
                                        </td>
                                        <td>
                                            {{t.ae_invoice_date|date:"d-m-Y"}}
                                        </td>
                                        <td>
                                            {{t.ae_invoice_no}}
                                        </td>
                                        <td>
                                            <a href="#" style="color:blue;">{{ t.ae_vendor_name.company_name|upper }}</a>
                                        </td>
                                    
                                        <td>
                                            ₹{{t.all_total}}
                                        </td>
                                        <td>
                                            ₹{{t.ae_due_amount|floatformat:2}}
                                        </td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <a href="{% url 'edit_accexpense' id=t.id %}" class="btn btn-sm btn-white text-success me-2"
                                                    role="button"><i class="far fa-edit me-1"></i></a>
                                                    <!-- <a href="{% url 'show_acquo_pdf' id=t.id %}" class="btn btn-sm btn-white text-success me-2"
                                                    role="button"><i class="fas fa-eye"></i></a> -->


                                                <!-- Link directly to the delete view with the customer ID -->
                                                <!-- <a class="btn btn-sm btn-white text-danger confirm_delete" onclick="confirmDelete('{% url 'delete_quotation' id=t.id %}')"> -->
                                                    <a class="btn btn-sm btn-white text-danger confirm_delete" href="{% url 'delete_accexpense' id=t.id %}">
                                                        <i class="far fa-trash-alt me-1"></i>
                                                    </a>
                                                    
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                    {% endif %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<div id="deleteModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-top">
        <div class="modal-content">
            <div class="modal-header bg-danger">
                <h4 class="modal-title" id="topModalLabel">Confirm Delete</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h5>Are you sure want to delete this record ?</h5>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="btndelete">Delete</button>
            </div>
        </div>
    </div>
</div>
{% endblock main_content %}
{% block custom_js %}





<script>
    function filterTable() {
        var startDate = new Date(document.getElementById('startDate').value);
        var endDate = new Date(document.getElementById('endDate').value);
        var tableRows = document.querySelectorAll('#challanTable tbody tr');
  
        tableRows.forEach(function(row) {
            var dateStr = row.cells[0].innerText;
            var rowDate = new Date(dateStr);
            startDate.setDate(startDate.getDate() - 1);
  
            // Adjust the end date to include the whole day
  
            if (rowDate >= startDate && rowDate < endDate) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    }
  </script>
  








<!-- Include Toastr CSS and JavaScript -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
<!-- <script>
  // Function to show the toast message
  function showToastMessage(message, type) {
    toastr[type](message);
  }

  // Check if a success message exists and show it as a toast
  {% if messages %}
    {% for message in messages %}
      {% if message.tags == 'success' %}
        showToastMessage('{{ message }}', 'success');
      {% endif %}
    {% endfor %}
  {% endif %}
</script> -->
<script>
    // Show the message container
    var messageContainer = document.getElementById('message-container');
    messageContainer.style.display = 'block';

    // Automatically hide the message after 10 seconds
    setTimeout(function () {
        messageContainer.style.display = 'none';
    }, 2000); // 10000 milliseconds = 10 seconds
</script>
<!-- Include DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
<!-- Include DataTables JavaScript -->
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>

<script>
    // Function to confirm the delete action
    function confirmDelete(url) {
        if (confirm("Are you sure you want to delete this item?")) {
            // If the user clicks OK, redirect to the delete URL
            window.location.href = url;
        }
    }
</script>
{% endblock custom_js %}