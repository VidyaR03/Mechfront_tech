{% extends 'dashboard/base_template.html' %}
{% block title %}
CRM
{% endblock %}

{% block custom_css %}



{% endblock custom_css %}

{% block main_content %}


<div class="page-wrapper" style="padding-top: 0px;">
    <div class="content container-fluid">
        <div class="page-header">
            <div class="row">
                <div class="col-sm-12">
                    <h3 class="page-title">
                        <a href="{% url 'fn_cash_coucher_List_View' %}" style="margin-right: 10px;">
                            <i class="fa fa-arrow-left" data-bs-toggle="tooltip" title="" data-bs-original-title="Back" aria-label="fa fa-arrow-left"></i>
                        </a>
                        Add Cash Voucher
                    </h3>
                </div>
            </div>
        </div>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-body">
                            <form method="post" id="vendor_form" action="" autocomplete="off">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Voucher Number <span style="color: red;">*</span></label>
                                            <input type="number" class="form-control" name="voucher_number" id="voucher_number" placeholder="Voucher Number" required>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="inputDefault" >Date <span style="color: red;">*</span></label>
                                            <input type="date" class="form-control" name="date" placeholder="Date" required value="{{current_date | date:'Y-m-d'}}" >
                                        </div>
                                    </div>
                                 
                                   
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Amount <span style="color: red;">*</span></label>
                                            <input type="number" class="form-control" name="amount" id="amount" placeholder="Amount" required step="any"
                                            >
                                        </div>
                                    </div>


                                     <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Pay To</label>
                                           <input type="text" class="form-control" name="pay_to" id="pay_to" placeholder="Pay To">
                                        </div>
                                     </div> 
                                     <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Particular</label>
                                           <input type="text" class="form-control" name="particular" id="particular" placeholder="particular">
                                        </div>
                                     </div> 
                                     <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Cost Centre <span style="color: red;">*</span></label>
                                           <select class="form-select" name="cost_centre" id="cost_centre                                               " required>                                               
                                            <option value="">Select Cost Center</option>
                                            <option value="Office Cleaning">Office Cleaning</option>
                                            <option value="Electricity Bill">Electricity Bill</option>
                                            <option value="Rent">Rent</option>
                                            <option value="Drinking Water">Drinking Water</option>
                                            <option value="Consultancy Charges">Consultancy Charges</option>
                                            <option value="Software Design">Software Design</option>
                                            <option value="Repair And Maintenance">Repair And Maintenance</option>
                                            <option value="Other Expenses">Other Expenses</option>
                                            <option value="Transport">Transport</option>
                                            <option value="Loading &amp; Unloading Wages">Loading &amp; Unloading Wages</option>
                                            <option value="Canteen">Canteen</option>
                                         </select>
                                        </div>
                                     </div>
                                     <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Bill Number</label>
                                           <input type="text" class="form-control" name="bill_no" id="bill_no" placeholder="bill_no">
                                        </div>
                                     </div>
                                   
                                    
                                     <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="inputDefault" >Bill Date <span style="color: red;">*</span></label>
                                            <input type="date" class="form-control" name="bill_date" placeholder="Bill Date" required value="{{current_date | date:'Y-m-d'}}" >
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Remark</label>
                                            <textarea type="text" name="remark" id="remark" class="form-control" placeholder="Remark" ></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Balance  <span style="color: red;">*</span></label>
                                           <input type="number" class="form-control" name="balance" id="balance" placeholder="balance" required>
                                        </div>
                                     </div>
                                                     
                                      

                                 
                                </div>
                                <div class="add-customer-btns text-end">
                                    <a href="{% url 'fn_cash_coucher_List_View' %}" class="btn customer-btn-cancel btn-outline-danger me-1 btn-rounded">Cancel</a>
                                    <button type="submit" class="btn btn-outline-primary me-1 btn-rounded">Save Cash Voucher</button>
                                </div>
                                <div class="row col-sm-6 p-5">
                                    <div class="success_message row"></div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>



{% block custom_js %}
<script>
   document.addEventListener("DOMContentLoaded", function() {
       const gstNoInput = document.getElementById("gst_no");
       const gstNoLabel = document.querySelector(".gst_no"); // Get the label element
       const toggleGst = document.getElementById("toggleGst");

       // Check if GST number is initially provided
       if (gstNoInput.value.trim() !== '') {
           // If GST number is provided, keep the toggle button "on" (clicked)
           toggleGst.checked = true;
       } else {
           // If GST number is empty, turn the toggle button "off"
           toggleGst.checked = false;
           // Hide the GST number label and input field
           gstNoInput.style.display = 'none';
           gstNoLabel.style.display = 'none';
       }

       toggleGst.addEventListener("change", function() {
           if (!toggleGst.checked) {
               // If the toggle button is turned off, hide the GST number label and input field
               gstNoInput.style.display = 'none';
               gstNoLabel.style.display = 'none';
           } else {
               // If the toggle button is turned on, show the GST number label and input field
               gstNoInput.style.display = 'block';
               gstNoLabel.style.display = 'block';
           }
       });

       gstNoInput.addEventListener("input", function() {
           const gstNoValue = this.value.trim();
           if (gstNoValue !== '') {
               // If GST number is provided, keep the toggle button "on" (clicked)
               toggleGst.checked = true;
           } else {
               // If GST number is empty, turn the toggle button "off"
               toggleGst.checked = false;
           }
       });
   });
</script>

<!-- Add this script at the bottom of your HTML file, after the other JavaScript code -->
<script>
   document.addEventListener("DOMContentLoaded", function() {
     const gstIdInput = document.getElementById("gst_no");
     const panInput = document.getElementById("pan_no");
 
     // Function to generate PAN from GST (Assuming the format is consistent)
     function generatePAN(gstId) {
       // Extract the 3rd to 12th characters from the GST ID
       const panSubstring = gstId.substr(2, 10);
       // Append a fixed PAN suffix
       const panNumber = panSubstring;
       return panNumber;
     }
 
     gstIdInput.addEventListener("input", function() {
       const gstIdValue = this.value;
       if (gstIdValue.length >= 12) {
         const panValue = generatePAN(gstIdValue);
         panInput.value = panValue;
       } else {
         panInput.value = ''; // Clear the PAN field if the GST is not long enough
       }
     });
   });
 </script>
<script>
   document.addEventListener("DOMContentLoaded", function() {
      const gstNoInput = document.getElementById("gst_no");
      const toggleGst = document.getElementById("toggleGst");
  
      // Check if GST number is initially provided
      if (gstNoInput.value.trim() !== '') {
          // If GST number is provided, keep the toggle button "on" (clicked)
          toggleGst.checked = true;
      } else {
          // If GST number is empty, turn the toggle button "off"
          toggleGst.checked = false;
      }
  
      gstNoInput.addEventListener("input", function() {
          const gstNoValue = this.value.trim();
          if (gstNoValue !== '') {
              // If GST number is provided, keep the toggle button "on" (clicked)
              toggleGst.checked = true;
          } else {
              // If GST number is empty, turn the toggle button "off"
              toggleGst.checked = false;
          }
      });
  });
  
</script>  
<script>
   document.addEventListener("DOMContentLoaded", function() {
       // Your existing code for other fields here...
       
       // Function to validate Maximum Payment Limit
       function validateMaximumPaymentLimit(value) {
           // Allow empty value
           if (value.trim() === '') {
               return true;
           }

           // Add any additional validation logic if needed
           return true; // Return true for non-empty values (add validation logic here if needed)
       }

       const maximumPaymentLimitInput = document.getElementById("maximum_payment_limit");
       
       maximumPaymentLimitInput.addEventListener("input", function() {
           const value = this.value;
           if (!validateMaximumPaymentLimit(value)) {
               // Display an error message or perform other actions for invalid values
           }
       });
   });
</script>
<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
   // Get references to the dropdown and input fields
   var scustomer = document.getElementById("first_name");
   var fromInput = document.getElementById("display_name_input");

   // Add an event listener to the dropdown to update the input field when it changes
   scustomer.addEventListener("change", function () {
       var selectedcustomer = scustomer.value;
       fromInput.value = selectedcustomer;
   });
</script>



<script>
   document.addEventListener("DOMContentLoaded", function() {
       // Your existing code for other fields here...
       
       // Function to validate Total Supply Value
       function validateTotalSupplyValue(value) {
           if (value.trim() === '') {
               return true; // Allow empty value
           }
           
           // Add any additional validation logic if needed
           return true; // Return true for non-empty values (add validation logic here if needed)
       }

       // Function to validate Maximum Payment Limit
       function validateMaximumPaymentLimit(value) {
           if (value.trim() === '') {
               return true; // Allow empty value
           }

           // Add any additional validation logic if needed
           return true; // Return true for non-empty values (add validation logic here if needed)
       }

       const totalSupplyValueInput = document.getElementById("total_supply_value");
       const maximumPaymentLimitInput = document.getElementById("maximum_payment_limit");
       
       totalSupplyValueInput.addEventListener("input", function() {
           const value = this.value;
           if (!validateTotalSupplyValue(value)) {
               // Display an error message or perform other actions for invalid values
           }
       });
       
       maximumPaymentLimitInput.addEventListener("input", function() {
           const value = this.value;
           if (!validateMaximumPaymentLimit(value)) {
               // Display an error message or perform other actions for invalid values
           }
       });
   });
</script>

   <script>
      document.addEventListener("DOMContentLoaded", function() {
         const ifscInput = document.getElementById("ifscInput");
         const ifscError = document.getElementById("ifscError");
   
         // Function to validate an IFSC code
         function validateIFSC(ifsc) {
            if (ifsc.trim() === '') {
               return true;  // Empty value is allowed
            }
   
            const ifscRegex = /^[A-Za-z]{4}[0-9]{7}$/; // Regular expression for IFSC
            return ifscRegex.test(ifsc);
         }
   
         ifscInput.addEventListener("input", function() {
            const ifscValue = this.value.trim().toUpperCase(); // Remove whitespace and convert to uppercase
            if (!validateIFSC(ifscValue)) {
               ifscError.textContent = 'Enter a valid IFSC code (e.g., ABCD0123456).';
            } else {
               ifscError.textContent = '';
            }
         });
      });
   </script>
   

<script>
  document.addEventListener("DOMContentLoaded", function() {
      const mobileInput = document.getElementById("mobile");
      const mobileError = document.getElementById("mobileError");

      mobileInput.addEventListener("input", function() {
          const mobileValue = this.value;
          const mobileRegex = /^[0-9]{10}$/; // Regular expression for a 10-digit mobile number

          if (!mobileRegex.test(mobileValue)) {
              mobileError.textContent = "Enter a valid 10-digit mobile number.";
          } else {
              mobileError.textContent = "";
          }
      });
  });
</script>

<script>
   document.addEventListener("DOMContentLoaded", function() {
       const gstNoInput = document.getElementById("gst_no");
       const gstNoError = document.getElementById("gstNoError");
 
       function validateGSTNo(gstNoValue) {
           if (gstNoValue.trim() === '') {
               return true;  // Allow empty value
           }
 
           const gstNoRegex = /^([0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1})$/; 
 
           return gstNoRegex.test(gstNoValue);
       }
 
       gstNoInput.addEventListener("input", function() {
           const gstNoValue = this.value;
 
           if (!validateGSTNo(gstNoValue)) {
               gstNoError.textContent = "Enter a valid GST number (e.g., 12ABCDE1234F1Z5).";
           } else {
               gstNoError.textContent = "";
           }
       });
   });
 </script>
 <script>
   document.addEventListener("DOMContentLoaded", function() {
       const panInput = document.getElementById("pan_no");
       const panError = document.getElementById("panError");
 
       // Function to validate a PAN number
       function validatePAN(pan) {
           if (pan.trim() === '') {
               return true;  // Allow empty value
           }
 
           const panRegex = /^[A-Z]{5}[0-9]{4}[A-Z]$/; // Regular expression for PAN
           return panRegex.test(pan);
       }
 
       panInput.addEventListener("input", function() {
           const panValue = this.value.trim().toUpperCase(); // Remove whitespace and convert to uppercase
           if (!validatePAN(panValue)) {
               panError.textContent = 'Enter a valid PAN number (e.g., ABCDE1234F).';
           } else {
               panError.textContent = '';
           }
       });
   });
 </script>
 
{% endblock custom_js %}    
{% endblock main_content %}

    
