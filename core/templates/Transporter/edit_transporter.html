{% extends 'dashboard/base_template.html' %}
{% block title %}
CRM
{% endblock %}

{% block custom_css %}
{% endblock custom_css %}

{% block main_content %}
<div class="page-wrapper" style="padding-top: 0px;">
    <div class="content container-fluid">
        <div class="page-header">
            <div class="row">
                <div class="col-sm-12">
                    <h3 class="page-title">
                        <a href="{% url 'fn_transporter_List_View' %}" style="margin-right: 10px;">
                            <i class="fa fa-arrow-left" data-bs-toggle="tooltip" title="" data-bs-original-title="Back" aria-label="fa fa-arrow-left"></i>
                        </a>
                        Edit Transporter
                    </h3>
                </div>
            </div>
        </div>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-body">
                            <form method="post" id="vendor_form" action="" autocomplete="off">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Name</label><span
                                            style="color: red;">*</span>
                                            <input type="text" class="form-control" name="name" id="name" value="{{transporter_instance.name}}"  placeholder="Name" required>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Address</label><span
                                            style="color: red;">*</span>
                                            <input type="text" name="address" id="address" class="form-control" value="{{transporter_instance.address}}"   placeholder="Address" required>
                                        </div>
                                    </div>
                                  
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label>GST No</label>
                                        <input type="text" class="form-control" name="gst_no" id="gst_no_input" value="{{transporter_instance.gst_no}}"  placeholder="GST No.">
                                        <span id="gstError" style="color: red;"></span>
                                        </div>
                                    </div> 
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Bank Name</label>
                                           <input type="text" class="form-control" name="bank_name" id="bank_name" value="{{transporter_instance.bank_name}}"  placeholder="Bank Name">
                                        </div>
                                     </div> 
                                     <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Account Number</label>
                                           <input type="number" class="form-control" name="account_number" id="account_number" value="{{transporter_instance.account_number}}"  placeholder="Account No." maxlength="17">
                                        </div>
                                     </div> 
                                     <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Branch</label>
                                           <input type="text" class="form-control" name="branch_name" id="branch_name" value="{{transporter_instance.branch_name}}"  placeholder="Branch Name">
                                        </div>
                                     </div>
                                     <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Mobile Number</label><span
                                        style="color: red;">*</span>
                                            <input type="text" class="form-control" name="mobile" id="mobile" value="{{transporter_instance.mobile}}"  placeholder="Mobile" required pattern="\d{10}" title="Enter a 10-digit number">
                                        </div>
                                     </div>                    
                                      

                                     <div class="col-md-3">
                                        <div class="form-group">
                                        <label>Email</label>
                                             <input type="email" class="form-control" name="vendor_email" id="email" value="{{transporter_instance.vendor_email}}"  placeholder="Email Address"  pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"  title="Please enter a valid email address">
                                             <p id="msg_email" style="color: red;"></p>
                                          </div>
                                    </div>
                                    <!-- <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Date</label>
                                            <input type="text" class="form-control" name="timestamp" id="timestamp" value="{{transporter_instance.timestamp}}"  placeholder="Date">
                                        </div>
                                    </div> -->
                                </div>
                                <div class="add-customer-btns text-end">
                                    <a href="{% url 'fn_transporter_List_View' %}" class="btn customer-btn-cancel btn-outline-danger me-1 btn-rounded">Cancel</a>
                                    <button type="submit" class="btn btn-outline-primary me-1 btn-rounded">Save Transporter</button>
                                </div>
                                <div class="row col-sm-6 p-5">
                                    <div class="success_message row"></div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>


<script>
    document.getElementById("email").addEventListener("input", function() {
        validateEmail(this);
    });

    function validateEmail(emailField) {
        var reg = /^([A-Za-z0-9_\-\.])+@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        const emailError = document.getElementById("msg_email");
        
        // If the field is empty, clear any error message and return
        if (emailField.value.trim() === "") {
            emailError.textContent = '';
            emailField.classList.remove('is-invalid');
            emailField.classList.remove('is-valid');
            return;
        }
        
        if (reg.test(emailField.value)) {
            emailError.textContent = '';
            emailField.classList.remove('is-invalid');
            emailField.classList.add('is-valid');
        } else {
            emailError.textContent = "Please enter a valid email";
            emailField.classList.add('is-invalid');
            emailField.classList.remove('is-valid');
        }
    }
    
</script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
      const mobileInput = document.getElementById("mobile");
      const mobileError = document.getElementById("mobileError");

      mobileInput.addEventListener("input", function() {
          const mobileValue = this.value;
          const mobileRegex = /^[0-9]{10}$/; // Regular expression for a 10-digit mobile number

          if (!mobileRegex.test(mobileValue)) {
              mobileError.textContent = "Enter a valid 10-digit mobile number.";
          } else {
              mobileError.textContent = "";
          }
      });
  });
</script>



<script>
    document.addEventListener("DOMContentLoaded", function () {
     const gstNoInput = document.getElementById("gst_no_input");
     const gstError = document.getElementById("gstError");
 
     function validateGSTNo(gstNoValue) {
         if (gstNoValue.trim() === '') {
             return true;  // Allow empty value
         }
 
         const gstNoRegex = /^([0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1})$/;
         return gstNoRegex.test(gstNoValue);
     }
 
     gstNoInput.addEventListener("input", function () {
         const gstNoValue = this.value;
 
         if (!validateGSTNo(gstNoValue)) {
             gstError.textContent = "Enter a valid GST number (e.g., 12ABCDE1234F1Z5).";
         } else {
             gstError.textContent = "";
         }
     });
 });
 
 </script>

      

    
   </body>
</html>
{% endblock main_content %}