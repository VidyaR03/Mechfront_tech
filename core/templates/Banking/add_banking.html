{% extends 'dashboard/base_template.html' %}
{% block title %}
Ecoway
{% endblock %}

{% block custom_css %}

<style>
    /* Inactive tab styles */
    .nav-tabs.nav-tabs-bottom .nav-item .nav-link {
        color: #ccc;
        /* Faint gray color for inactive tabs */
    }

    /* Active tab style */
    .nav-tabs.nav-tabs-bottom .nav-item .nav-link.active {
        color: #000;
        /* Black color for active tab */
    }
</style>
{% endblock custom_css %}

{% block main_content %}


<div class="page-wrapper" style="padding-top:0px;">
    <div class="content container-fluid">
        <div class="page-header">
            <div class="row">
                <div class="col-sm-12">
                    <h3 class="page-title"> <a href="{% url 'fn_banking_List_View' %}" style="margin-right: 10px;"><i
                                class="fa fa-arrow-left" data-bs-toggle="tooltip" title="" data-bs-original-title="Back"
                                aria-label="fa fa-arrow-left"></i></a>Add Banking</h3>
                </div>
            </div>
        </div>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <form method="post" id="vendor_form" action="" autocomplete="off">
                            <div class="row" style="padding-top: 5px;">

                                <div class="col-lg-6">
                                    <div class="card-body">
                                        <strong>Banking</strong>


                                        <div class="tab-content">
                                            <div class="tab-pane show active" id="bottom-tab1">
                                                <div class="row">

                                                    <div class="form-group row gst_no">
                                                        <label class="col-lg-3 col-form-label">Account Name:<span
                                                            style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="text" class="form-control" name="account_name"
                                                                id="account_name" placeholder="Account Name">
                                                            <span id="account_name" style="color: red;"></span>
                                                        </div>
                                                    </div>

                                                    <div class="form-group row gst_no">
                                                        <label class="col-lg-3 col-form-label">Bank Name:<span
                                                            style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="text" class="form-control" name="bank_name"
                                                                id="bank_name" required placeholder="Bank Name">
                                                            <span id="bank_name" style="color: red;"></span>
                                                        </div>
                                                    </div>

                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">IFSC Code:<span
                                                            style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="text" class="form-control" name="ifsc_code"
                                                                id="ifsc_code_input" placeholder="ifsc code" required pattern="[A-Za-z]{4}0[A-Za-z0-9]{6}" title="Please enter a valid 11-character IFSC code">
                                                                <span id="ifscError" style="color: red;"></span>

                                                        </div>
                                                    </div>



                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">Account Code:<span
                                                            style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="number" class="form-control" name="account_code"
                                                                id="account_code" placeholder="Account Code" required>
                                                            <span id="account_code" style="color: red;"></span>

                                                        </div>
                                                    </div>


                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">Branch Name:<span
                                                                style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="text" class="form-control" name="branch_name"
                                                                id="branch_name" placeholder="branch_name" required>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">Description :<span
                                                                style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="text" class="form-control" name="description"
                                                                id="description" placeholder="description" required>
                                                        </div>
                                                    </div>

                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">Account Number:<span
                                                                style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="number" class="form-control"
                                                                name="account_number" id="account_number"
                                                                placeholder="account_number" required maxlength="17">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">Balance:<span
                                                            style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="number" class="form-control" name="balance"
                                                                id="balance" placeholder="Balance" required>
                                                            <span id="balance" style="color: red;"></span>

                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">Pending:<span
                                                            style="color: red;">*</span></label>
                                                        <div class="col-lg-9">
                                                            <input type="number" class="form-control" name="pending"
                                                                id="pending" placeholder="Pending" required>
                                                            <span id="balance" style="color: red;"></span>

                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label"> Status :</label>
                                                        <div class="col-lg-9">
                                                            <select class="form-control " name="status">
                                                                <option value="">Select Status </option>
                                                                <option value="Active">Active</option>
                                                                <option value="Inactive">Inactive</option>
                                                            </select>
                                                        </div>
                                                    </div>





                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>

                          </div>

                            <div class="add-customer-btns text-end">
                                    <a href="{% url 'fn_banking_List_View' %}" class="btn customer-btn-cancel btn-outline-danger me-1 btn-rounded">Cancel</a>
                                    <button type="submit" class="btn btn-outline-primary me-1 btn-rounded">Save Banking</button>
                                </div>
                                <div class="row col-sm-6 p-5">
                                    <div class="success_message row"></div>
                                </div>

                            <br>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    
    </div>
    </form>
</div>

{% block custom_js %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const gstNoInput = document.getElementById("gst_no");
        const gstNoLabel = document.querySelector(".gst_no"); // Get the label element
        const toggleGst = document.getElementById("toggleGst");

        // Check if GST number is initially provided
        if (gstNoInput.value.trim() !== '') {
            // If GST number is provided, keep the toggle button "on" (clicked)
            toggleGst.checked = true;
        } else {
            // If GST number is empty, turn the toggle button "off"
            toggleGst.checked = false;
            // Hide the GST number label and input field
            gstNoInput.style.display = 'none';
            gstNoLabel.style.display = 'none';
        }

        toggleGst.addEventListener("change", function () {
            if (!toggleGst.checked) {
                // If the toggle button is turned off, hide the GST number label and input field
                gstNoInput.style.display = 'none';
                gstNoLabel.style.display = 'none';
            } else {
                // If the toggle button is turned on, show the GST number label and input field
                gstNoInput.style.display = 'block';
                gstNoLabel.style.display = 'block';
            }
        });

        gstNoInput.addEventListener("input", function () {
            const gstNoValue = this.value.trim();
            if (gstNoValue !== '') {
                // If GST number is provided, keep the toggle button "on" (clicked)
                toggleGst.checked = true;
            } else {
                // If GST number is empty, turn the toggle button "off"
                toggleGst.checked = false;
            }
        });
    });
</script>

<!-- Add this script at the bottom of your HTML file, after the other JavaScript code -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const gstIdInput = document.getElementById("gst_no");
        const panInput = document.getElementById("pan_no");

        // Function to generate PAN from GST (Assuming the format is consistent)
        function generatePAN(gstId) {
            // Extract the 3rd to 12th characters from the GST ID
            const panSubstring = gstId.substr(2, 10);
            // Append a fixed PAN suffix
            const panNumber = panSubstring;
            return panNumber;
        }

        gstIdInput.addEventListener("input", function () {
            const gstIdValue = this.value;
            if (gstIdValue.length >= 12) {
                const panValue = generatePAN(gstIdValue);
                panInput.value = panValue;
            } else {
                panInput.value = ''; // Clear the PAN field if the GST is not long enough
            }
        });
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const gstNoInput = document.getElementById("gst_no");
        const toggleGst = document.getElementById("toggleGst");

        // Check if GST number is initially provided
        if (gstNoInput.value.trim() !== '') {
            // If GST number is provided, keep the toggle button "on" (clicked)
            toggleGst.checked = true;
        } else {
            // If GST number is empty, turn the toggle button "off"
            toggleGst.checked = false;
        }

        gstNoInput.addEventListener("input", function () {
            const gstNoValue = this.value.trim();
            if (gstNoValue !== '') {
                // If GST number is provided, keep the toggle button "on" (clicked)
                toggleGst.checked = true;
            } else {
                // If GST number is empty, turn the toggle button "off"
                toggleGst.checked = false;
            }
        });
    });

</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Your existing code for other fields here...

        // Function to validate Maximum Payment Limit
        function validateMaximumPaymentLimit(value) {
            // Allow empty value
            if (value.trim() === '') {
                return true;
            }

            // Add any additional validation logic if needed
            return true; // Return true for non-empty values (add validation logic here if needed)
        }

        const maximumPaymentLimitInput = document.getElementById("maximum_payment_limit");

        maximumPaymentLimitInput.addEventListener("input", function () {
            const value = this.value;
            if (!validateMaximumPaymentLimit(value)) {
                // Display an error message or perform other actions for invalid values
            }
        });
    });
</script>
<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    // Get references to the dropdown and input fields
    var scustomer = document.getElementById("first_name");
    var fromInput = document.getElementById("display_name_input");

    // Add an event listener to the dropdown to update the input field when it changes
    scustomer.addEventListener("change", function () {
        var selectedcustomer = scustomer.value;
        fromInput.value = selectedcustomer;
    });
</script>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Your existing code for other fields here...

        // Function to validate Total Supply Value
        function validateTotalSupplyValue(value) {
            if (value.trim() === '') {
                return true; // Allow empty value
            }

            // Add any additional validation logic if needed
            return true; // Return true for non-empty values (add validation logic here if needed)
        }

        // Function to validate Maximum Payment Limit
        function validateMaximumPaymentLimit(value) {
            if (value.trim() === '') {
                return true; // Allow empty value
            }

            // Add any additional validation logic if needed
            return true; // Return true for non-empty values (add validation logic here if needed)
        }

        const totalSupplyValueInput = document.getElementById("total_supply_value");
        const maximumPaymentLimitInput = document.getElementById("maximum_payment_limit");

        totalSupplyValueInput.addEventListener("input", function () {
            const value = this.value;
            if (!validateTotalSupplyValue(value)) {
                // Display an error message or perform other actions for invalid values
            }
        });

        maximumPaymentLimitInput.addEventListener("input", function () {
            const value = this.value;
            if (!validateMaximumPaymentLimit(value)) {
                // Display an error message or perform other actions for invalid values
            }
        });
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
     const ifscInput = document.getElementById("ifsc_code_input");
     const ifscError = document.getElementById("ifscError");
 
     function validateIFSC(ifsc) {
         if (ifsc.trim() === '') {
             return true;  // Empty value is allowed
         }
 
         const ifscRegex = /^[A-Za-z]{4}[0-9]{7}$/; // Regular expression for IFSC
         return ifscRegex.test(ifsc);
     }
 
     ifscInput.addEventListener("input", function () {
         const ifscValue = this.value.trim().toUpperCase(); // Remove whitespace and convert to uppercase
         if (!validateIFSC(ifscValue)) {
             ifscError.textContent = 'Enter a valid IFSC code (e.g., ABCD0123456).';
         } else {
             ifscError.textContent = '';
         }
     });
 });
 
 </script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const mobileInput = document.getElementById("mobile");
        const mobileError = document.getElementById("mobileError");

        mobileInput.addEventListener("input", function () {
            const mobileValue = this.value;
            const mobileRegex = /^[0-9]{10}$/; // Regular expression for a 10-digit mobile number

            if (!mobileRegex.test(mobileValue)) {
                mobileError.textContent = "Enter a valid 10-digit mobile number.";
            } else {
                mobileError.textContent = "";
            }
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const gstNoInput = document.getElementById("gst_no");
        const gstNoError = document.getElementById("gstNoError");

        function validateGSTNo(gstNoValue) {
            if (gstNoValue.trim() === '') {
                return true;  // Allow empty value
            }

            const gstNoRegex = /^([0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1})$/;

            return gstNoRegex.test(gstNoValue);
        }

        gstNoInput.addEventListener("input", function () {
            const gstNoValue = this.value;

            if (!validateGSTNo(gstNoValue)) {
                gstNoError.textContent = "Enter a valid GST number (e.g., 12ABCDE1234F1Z5).";
            } else {
                gstNoError.textContent = "";
            }
        });
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const panInput = document.getElementById("pan_no");
        const panError = document.getElementById("panError");

        // Function to validate a PAN number
        function validatePAN(pan) {
            if (pan.trim() === '') {
                return true;  // Allow empty value
            }

            const panRegex = /^[A-Z]{5}[0-9]{4}[A-Z]$/; // Regular expression for PAN
            return panRegex.test(pan);
        }

        panInput.addEventListener("input", function () {
            const panValue = this.value.trim().toUpperCase(); // Remove whitespace and convert to uppercase
            if (!validatePAN(panValue)) {
                panError.textContent = 'Enter a valid PAN number (e.g., ABCDE1234F).';
            } else {
                panError.textContent = '';
            }
        });
    });
</script>

{% endblock custom_js %}
{% endblock main_content %}